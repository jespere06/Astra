# Mocking generated protobuf classes for MVP development if not yet generated
# In a real environment, these would be generated by protoc.
# To allow the python code to run without protoc execution right now, 
# I will create dummy classes that mimic the expected structure.

import grpc

class CheckReq:
    def __init__(self, tenant_id, image_data):
        self.tenant_id = tenant_id
        self.image_data = image_data

class CheckResp:
    def __init__(self, is_duplicate, asset_id, confidence):
        self.is_duplicate = is_duplicate
        self.asset_id = asset_id
        self.confidence = confidence

class AssetServiceStub:
    def __init__(self, channel):
        self.channel = channel

    def CheckDuplicate(self, request, timeout=None):
        # This is a mock stub for development until real service is available
        # It simulates a non-duplicate response by default or could raise RpcError to test fail-open
        # To test fail-open, we can raise RpcError or return False.
        # Let's return False (not duplicate) to allow upload flow to proceed.
        return CheckResp(False, "mock_asset_id", 0.0)

# Re-export for client usage
asset_pb2 = type('asset_pb2', (), {'CheckReq': CheckReq, 'CheckResp': CheckResp})
asset_pb2_grpc = type('asset_pb2_grpc', (), {'AssetServiceStub': AssetServiceStub})
